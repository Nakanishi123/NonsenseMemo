---
import { URL_BASE } from "../../consts";
import { getCollection } from "astro:content";
import { tag2Color } from "./tagUtils";
import Tag from "./Tag.astro";

const allPosts = await getCollection("blog");
const uniqueTags = [...new Set(allPosts.map(post => post.data.tags).flatMap(tag => tag ?? []))];
---

<div class="flex flex-wrap">
  {
    uniqueTags.map(tag => {
      const num = allPosts.filter(post => post.data.tags?.includes(tag)).length;
      return <Tag tag={tag} num={num} />;
    })
  }
</div>
